require 'test_helper'

class TextProcessorTest < ActiveSupport::TestCase
  let(:processor) { TextProcessor.new(logger: Logger.new('/dev/null')) }

  it 'defines supported tasks' do
    TextProcessor.supported_tasks.first.must_equal 'analyze'
  end

  describe 'copy_file' do

    let(:msg) {
      {
        task: {
          id: 'guid1',
          task_type: 'analyze',
          label: 'sherlock',
          job: { id: 'guid1', job_type: 'text', status: 'created', original: "file://#{in_file('test.txt')}" },
          options: {},
          result: 'file:///test/test_analysis.json'
        }
      }.with_indifferent_access
    }

    before {
      WebMock.disable_net_connect!
    }

    after {
      WebMock.allow_net_connect!
    }

    it 'should analyze file' do

      stub_request(:post, "http://api.opencalais.com/tag/rs/enrich").
        with(headers: {'Accept'=>'Application/JSON;charset=utf-8', 'Calculaterelevancescore'=>'false', 'Content-Type'=>'TEXT/RAW', 'Docrdfaccessible'=>'false', 'Enablemetadatatype'=>'SocialTags', 'Host'=>'api.opencalais.com:80', 'Omitoutputtingoriginaltext'=>'TRUE', 'Outputformat'=>'Application/JSON'}).
        to_return(
          status: 200,
          body: "{\"doc\":{\"info\":{\"calaisRequestID\":\"74e5269d-97a4-fe4b-14b8-4fa62cd3f206\",\"id\":\"http://id.opencalais.com/iHMvdOeU1lJOfgTIhu7LUw\",\"docId\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097\",\"document\":\"\",\"docTitle\":\"\",\"docDate\":\"2015-02-13 17:06:18.029\"},\"meta\":{\"contentType\":\"TEXT/RAW\",\"emVer\":\"7.1.1103.5\",\"langIdVer\":\"DefaultLangId\",\"processingVer\":\"CalaisJob01\",\"stagsVer\":\"8.0.OpenCalais-SNAPSHOT-b13-2012-06-14_23:22:25\",\"submissionDate\":\"2015-02-13 17:06:16.781\",\"submitterCode\":\"1124352d-f517-db83-8f1f-4295a0f15140\",\"signature\":\"digestalg-1|Wifo6bYCme27E0DijlGXHN/XTCg=|ZtA5WwF0dxXy/hsgvz9TjP/P8bJ1fbh2ZfxvlYHeJBnuJ64x5W9v5A==\",\"language\":\"English\"}},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/cat/1\":{\"_typeGroup\":\"topics\",\"category\":\"http://d.opencalais.com/cat/Calais/Law_Crime\",\"classifierName\":\"Calais\",\"categoryName\":\"Law_Crime\",\"score\":0.867},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/lid/DefaultLangId\":{\"_typeGroup\":\"language\",\"language\":\"http://d.opencalais.com/lid/DefaultLangId/English\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/1\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/1\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/b18b547e-6a8b-3a59-9d6e-a8e9e4477962\",\"name\":\"Christian terrorism\",\"importance\":\"1\",\"originalValue\":\"Christian terrorism\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/2\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/2\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/e89f9d13-c5ba-3b6e-b22b-96c874704d15\",\"name\":\"Anti-abortion violence in the United States\",\"importance\":\"1\",\"originalValue\":\"Anti-abortion violence in the United States\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/3\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/3\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/13bf55cf-1720-3386-8378-a41810fe4cf8\",\"name\":\"Eric Robert Rudolph\",\"importance\":\"1\",\"originalValue\":\"Eric Robert Rudolph\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/4\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/4\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/4afbf8ca-1b25-3949-a123-54b5ae184a82\",\"name\":\"Domestic terrorism in the United States\",\"importance\":\"2\",\"originalValue\":\"Domestic terrorism in the United States\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/5\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/5\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/40a9c015-726f-3150-9f22-32a3e3640244\",\"name\":\"Terrorism\",\"importance\":\"2\",\"originalValue\":\"Terrorism\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/6\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/6\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/2ae84720-7dc9-318e-9f99-21cfd38b7928\",\"name\":\"Crime in the United States\",\"importance\":\"2\",\"originalValue\":\"Crime in the United States\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/7\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/7\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/54467038-8579-30cd-95b7-064abffeff1d\",\"name\":\"Islamic terrorism\",\"importance\":\"2\",\"originalValue\":\"Islamic terrorism\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/8\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/8\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/fc090979-f803-3f01-9917-020e2f32b3c2\",\"name\":\"Anwar al-Awlaki\",\"importance\":\"2\",\"originalValue\":\"Anwar al-Awlaki\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/9\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/9\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/72b4f2c4-ec73-3c08-b425-1ffb4426c44d\",\"name\":\"History of the United States\",\"importance\":\"2\",\"originalValue\":\"History of the United States\"},\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/10\":{\"_typeGroup\":\"socialTag\",\"id\":\"http://d.opencalais.com/dochash-1/d335db24-f574-3db5-923d-f69c88315097/SocialTag/10\",\"socialTag\":\"http://d.opencalais.com/genericHasher-1/ea31334e-799c-3064-82e9-c2772a373029\",\"name\":\"Law_Crime\",\"importance\":\"1\"},\"http://d.opencalais.com/genericHasher-1/1a09614e-c95e-37c0-adee-c4c54320e570\":{\"_typeGroup\":\"entities\",\"_type\":\"Position\",\"name\":\"head of trauma care\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Position\",\"instances\":[{\"detection\":\"[to maximize the suffering.\\nDr. George Velmahos, ]head of trauma care[ at Massachusetts General Hospital, said his team]\",\"prefix\":\"to maximize the suffering.\\nDr. George Velmahos, \",\"exact\":\"head of trauma care\",\"suffix\":\" at Massachusetts General Hospital, said his team\",\"offset\":4726,\"length\":19}]},\"http://d.opencalais.com/pershash-1/91bde208-9dc4-3197-9c3b-aec7e213166a\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Ed Davis\",\"persontype\":\"political\",\"nationality\":\"N/A\",\"commonname\":\"Ed Davis\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[in the history of our department,\\\" Commissioner ]Ed Davis[ said Tuesday.\\nAuthorities sifted through]\",\"prefix\":\"in the history of our department,\\\" Commissioner \",\"exact\":\"Ed Davis\",\"suffix\":\" said Tuesday.\\nAuthorities sifted through\",\"offset\":4121,\"length\":8}]},\"http://d.opencalais.com/genericHasher-1/62f8aa31-1b8b-37ad-8df9-2172428f492d\":{\"_typeGroup\":\"entities\",\"_type\":\"Facility\",\"name\":\"Women's Hospital\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Facility\",\"instances\":[{\"detection\":\"[most of the patients treated at Brigham and ]Women's Hospital[ were wounded by \\\"ordinary debris,\\\" three were]\",\"prefix\":\"most of the patients treated at Brigham and \",\"exact\":\"Women's Hospital\",\"suffix\":\" were wounded by \\\"ordinary debris,\\\" three were\",\"offset\":5009,\"length\":16}]},\"http://d.opencalais.com/genericHasher-1/cba98186-4b12-3a6b-8bb8-c6f73259c671\":{\"_typeGroup\":\"entities\",\"_type\":\"Organization\",\"name\":\"Women's Hospital\",\"organizationtype\":\"N/A\",\"nationality\":\"N/A\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Organization\",\"instances\":[{\"detection\":\"[most of the patients treated at Brigham and ]Women's Hospital[ were wounded by \\\"ordinary debris,\\\" three were]\",\"prefix\":\"most of the patients treated at Brigham and \",\"exact\":\"Women's Hospital\",\"suffix\":\" were wounded by \\\"ordinary debris,\\\" three were\",\"offset\":5009,\"length\":16},{\"detection\":\"[that were uniform, consistent and metallic, the ]hospital['s chairman of emergency medicine said.\\n'Human]\",\"prefix\":\"that were uniform, consistent and metallic, the \",\"exact\":\"hospital\",\"suffix\":\"'s chairman of emergency medicine said.\\n'Human\",\"offset\":5156,\"length\":8}]},\"http://d.opencalais.com/genericHasher-1/3a950849-354e-3610-9f3c-dbeac8e584cb\":{\"_typeGroup\":\"entities\",\"_type\":\"Organization\",\"name\":\"al-Qaeda\",\"organizationtype\":\"N/A\",\"nationality\":\"N/A\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Organization\",\"instances\":[{\"detection\":\"[Middle East terrorism, it has the hallmarks of ]al Qaeda[ or a Middle East group,\\\" former FBI Assistant]\",\"prefix\":\"Middle East terrorism, it has the hallmarks of \",\"exact\":\"al Qaeda\",\"suffix\":\" or a Middle East group,\\\" former FBI Assistant\",\"offset\":2735,\"length\":8}]},\"http://d.opencalais.com/genericHasher-1/9a971d5c-e17f-3f12-8192-f5fd4b45c038\":{\"_typeGroup\":\"entities\",\"_type\":\"Facility\",\"name\":\"Massachusetts General Hospital\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Facility\",\"instances\":[{\"detection\":\"[George Velmahos, head of trauma care at ]Massachusetts General Hospital[, said his team found metal pellets and nails]\",\"prefix\":\"George Velmahos, head of trauma care at \",\"exact\":\"Massachusetts General Hospital\",\"suffix\":\", said his team found metal pellets and nails\",\"offset\":4749,\"length\":30}]},\"http://d.opencalais.com/pershash-1/b3ba1da6-6621-375c-8bd6-c171ebcf8d6e\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Patty\",\"persontype\":\"N/A\",\"nationality\":\"N/A\",\"commonname\":\"Patty\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[was the best,\\\" Campbell's distraught mother, ]Patty[, told reporters Tuesday. \\\"You couldn't ask for a]\",\"prefix\":\"was the best,\\\" Campbell's distraught mother, \",\"exact\":\"Patty\",\"suffix\":\", told reporters Tuesday. \\\"You couldn't ask for a\",\"offset\":3611,\"length\":5}]},\"http://d.opencalais.com/genericHasher-1/aa0824fb-7221-3795-b108-b6ffd5c0e42c\":{\"_typeGroup\":\"entities\",\"_type\":\"IndustryTerm\",\"name\":\"found metal pellets\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/IndustryTerm\",\"instances\":[{\"detection\":\"[ at Massachusetts General Hospital, said his team ]found metal pellets[ and nails inside patients' bodies.\\n\\\"They are]\",\"prefix\":\" at Massachusetts General Hospital, said his team \",\"exact\":\"found metal pellets\",\"suffix\":\" and nails inside patients' bodies.\\n\\\"They are\",\"offset\":4795,\"length\":19}]},\"http://d.opencalais.com/genericHasher-1/a67d2065-73ab-30ae-971a-ce00ab5f7eaf\":{\"_typeGroup\":\"entities\",\"_type\":\"Position\",\"name\":\"Assistant Director\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Position\",\"instances\":[{\"detection\":\"[of al Qaeda or a Middle East group,\\\" former FBI ]Assistant Director[ Tom Fuentes said. \\\"If your experience is]\",\"prefix\":\"of al Qaeda or a Middle East group,\\\" former FBI \",\"exact\":\"Assistant Director\",\"suffix\":\" Tom Fuentes said. \\\"If your experience is\",\"offset\":2780,\"length\":18}]},\"http://d.opencalais.com/genericHasher-1/e20de102-6312-3e6e-a07c-d20fdbe29ccb\":{\"_typeGroup\":\"entities\",\"_type\":\"Position\",\"name\":\"chairman\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Position\",\"instances\":[{\"detection\":\"[ uniform, consistent and metallic, the hospital's ]chairman[ of emergency medicine said.\\n'Human spirit' still]\",\"prefix\":\" uniform, consistent and metallic, the hospital's \",\"exact\":\"chairman\",\"suffix\":\" of emergency medicine said.\\n'Human spirit' still\",\"offset\":5167,\"length\":8}]},\"http://d.opencalais.com/genericHasher-1/a526ad56-3266-3ca9-b574-9cb5b371d7d5\":{\"_typeGroup\":\"entities\",\"_type\":\"Facility\",\"name\":\"Boston Medical Center\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Facility\",\"instances\":[{\"detection\":\"[wounded in the incident continued to recover.\\n]Boston Medical Center[ has two patients in critical condition, down]\",\"prefix\":\"wounded in the incident continued to recover.\\n\",\"exact\":\"Boston Medical Center\",\"suffix\":\" has two patients in critical condition, down\",\"offset\":5553,\"length\":21}]},\"http://d.opencalais.com/genericHasher-1/c489280c-385d-3106-90ca-9210b3965ea8\":{\"_typeGroup\":\"entities\",\"_type\":\"ProvinceOrState\",\"name\":\"Virginia\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/ProvinceOrState\",\"instances\":[{\"detection\":\"[were sent to the FBI's national laboratory in ]Virginia[, where technicians will try to reconstruct the]\",\"prefix\":\"were sent to the FBI's national laboratory in \",\"exact\":\"Virginia\",\"suffix\":\", where technicians will try to reconstruct the\",\"offset\":1845,\"length\":8}],\"resolutions\":[{\"id\":\"http://d.opencalais.com/er/geo/provinceorstate/ralg-geo1/1f4482fa-8b1f-d76a-8943-1a7e3fa9bf1a\",\"name\":\"Virginia,United States\",\"shortname\":\"Virginia\",\"containedbycountry\":\"United States\",\"latitude\":\"37.6666466469\",\"longitude\":\"-78.6145553005\"}]},\"http://d.opencalais.com/genericHasher-1/123fd254-2a44-3d3d-a806-9b59cac6aedc\":{\"_typeGroup\":\"entities\",\"_type\":\"Facility\",\"name\":\"Boston University\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Facility\",\"instances\":[{\"detection\":\"[Why is this so rare?\\nThird victim identified\\n]Boston University[ identified graduate student Lingzu Lu as the]\",\"prefix\":\"Why is this so rare?\\nThird victim identified\\n\",\"exact\":\"Boston University\",\"suffix\":\" identified graduate student Lingzu Lu as the\",\"offset\":3323,\"length\":17}]},\"http://d.opencalais.com/pershash-1/2e874661-9d32-304a-a5a9-f5107b08b52b\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"George Velmahos\",\"persontype\":\"N/A\",\"nationality\":\"N/A\",\"commonname\":\"George Velmahos\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[or bombmakers sought to maximize the suffering.\\n]Dr. George Velmahos[, head of trauma care at Massachusetts General]\",\"prefix\":\"or bombmakers sought to maximize the suffering.\\n\",\"exact\":\"Dr. George Velmahos\",\"suffix\":\", head of trauma care at Massachusetts General\",\"offset\":4705,\"length\":19},{\"detection\":\"[care at Massachusetts General Hospital, said ]his[ team found metal pellets and nails inside]\",\"prefix\":\"care at Massachusetts General Hospital, said \",\"exact\":\"his\",\"suffix\":\" team found metal pellets and nails inside\",\"offset\":4786,\"length\":3},{\"detection\":\"[10, 20, 30, 40 of them in their body, or more,\\\" ]Velmahos[ said.\\nWhile most of the patients treated at]\",\"prefix\":\"10, 20, 30, 40 of them in their body, or more,\\\" \",\"exact\":\"Velmahos\",\"suffix\":\" said.\\nWhile most of the patients treated at\",\"offset\":4944,\"length\":8}]},\"http://d.opencalais.com/genericHasher-1/4ffa1d6f-7ea4-3881-a68b-6096b197e15f\":{\"_typeGroup\":\"entities\",\"_type\":\"Organization\",\"name\":\"Boston Medical Center\",\"organizationtype\":\"N/A\",\"nationality\":\"American\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Organization\",\"instances\":[{\"detection\":\"[wounded in the incident continued to recover.\\n]Boston Medical Center[ has two patients in critical condition, down]\",\"prefix\":\"wounded in the incident continued to recover.\\n\",\"exact\":\"Boston Medical Center\",\"suffix\":\" has two patients in critical condition, down\",\"offset\":5553,\"length\":21}]},\"http://d.opencalais.com/genericHasher-1/a54ac18b-a956-3b5c-b235-0609ca899305\":{\"_typeGroup\":\"entities\",\"_type\":\"Country\",\"name\":\"United States\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Country\",\"instances\":[{\"detection\":\"[too was in a pressure cooker, the FBI said.\\nThe ]U.S.[ government has warned federal agencies in the]\",\"prefix\":\"too was in a pressure cooker, the FBI said.\\nThe \",\"exact\":\"U.S.\",\"suffix\":\" government has warned federal agencies in the\",\"offset\":1341,\"length\":4},{\"detection\":\"[both types of terrorism -- from Iraq to the ]United States[ -- and finds the Boston attack has elements of]\",\"prefix\":\"both types of terrorism -- from Iraq to the \",\"exact\":\"United States\",\"suffix\":\" -- and finds the Boston attack has elements of\",\"offset\":3096,\"length\":13}],\"resolutions\":[{\"id\":\"http://d.opencalais.com/er/geo/country/ralg-geo1/152649df-347e-e289-1a9e-acc883e07d17\",\"name\":\"United States\",\"latitude\":\"40.4230003233\",\"longitude\":\"-98.7372244786\"}]},\"http://d.opencalais.com/genericHasher-1/192ac1ce-fc94-3876-94c5-88893c412157\":{\"_typeGroup\":\"entities\",\"_type\":\"Position\",\"name\":\"Commissioner\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Position\",\"instances\":[{\"detection\":\"[dealt with in the history of our department,\\\" ]Commissioner[ Ed Davis said Tuesday.\\nAuthorities sifted]\",\"prefix\":\"dealt with in the history of our department,\\\" \",\"exact\":\"Commissioner\",\"suffix\":\" Ed Davis said Tuesday.\\nAuthorities sifted\",\"offset\":4108,\"length\":12}]},\"http://d.opencalais.com/genericHasher-1/8ce83f41-24dd-36e0-9931-091e3dd0671a\":{\"_typeGroup\":\"entities\",\"_type\":\"Organization\",\"name\":\"U.S. government\",\"organizationtype\":\"governmental civilian\",\"nationality\":\"American\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Organization\",\"instances\":[{\"detection\":\"[too was in a pressure cooker, the FBI said.\\nThe ]U.S. government[ has warned federal agencies in the past that]\",\"prefix\":\"too was in a pressure cooker, the FBI said.\\nThe \",\"exact\":\"U.S. government\",\"suffix\":\" has warned federal agencies in the past that\",\"offset\":1341,\"length\":15}]},\"http://d.opencalais.com/pershash-1/d72fb28e-b4d1-3d32-aca1-01f2c28dfb80\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Lingzu Lu\",\"persontype\":\"N/A\",\"nationality\":\"N/A\",\"commonname\":\"Lingzu Lu\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[University identified graduate student ]Lingzu Lu[ as the third person who died in Monday's]\",\"prefix\":\"University identified graduate student \",\"exact\":\"Lingzu Lu\",\"suffix\":\" as the third person who died in Monday's\",\"offset\":3369,\"length\":9}]},\"http://d.opencalais.com/pershash-1/9e2fb1e7-cd8c-34c5-a1ea-0052b601b191\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Candace Rispoli\",\"persontype\":\"N/A\",\"nationality\":\"N/A\",\"commonname\":\"Candace Rispoli\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[incident deeply affected thousands, including ]Candace Rispoli[, who was cheering on a friend when the festive]\",\"prefix\":\"incident deeply affected thousands, including \",\"exact\":\"Candace Rispoli\",\"suffix\":\", who was cheering on a friend when the festive\",\"offset\":5848,\"length\":15},{\"detection\":\"[atmosphere turned into a \\\"terrifying hell.\\\" ]She[ suffered minor injuries.\\n\\\"I personally will]\",\"prefix\":\"atmosphere turned into a \\\"terrifying hell.\\\" \",\"exact\":\"She\",\"suffix\":\" suffered minor injuries.\\n\\\"I personally will\",\"offset\":5955,\"length\":3},{\"detection\":\"[that something like this could happen again,\\\" ]she[ said. \\\"I keep replaying the moments of terror]\",\"prefix\":\"that something like this could happen again,\\\" \",\"exact\":\"she\",\"suffix\":\" said. \\\"I keep replaying the moments of terror\",\"offset\":6112,\"length\":3}]},\"http://d.opencalais.com/pershash-1/cf8282f4-6dc1-3b54-9984-35f9c849fcfc\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Rick DesLauriers\",\"persontype\":\"military\",\"nationality\":\"N/A\",\"commonname\":\"Rick DesLauriers\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[and images.\\n\\\"Someone knows who did this,\\\" said ]Rick DesLauriers[, the special agent in charge of the FBI's Boston]\",\"prefix\":\"and images.\\n\\\"Someone knows who did this,\\\" said \",\"exact\":\"Rick DesLauriers\",\"suffix\":\", the special agent in charge of the FBI's Boston\",\"offset\":4398,\"length\":16}]},\"http://d.opencalais.com/pershash-1/d6a3a86a-25dc-31aa-ac2e-eded7a10a114\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Peter Burke\",\"persontype\":\"N/A\",\"nationality\":\"N/A\",\"commonname\":\"Peter Burke\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[ condition, down from 11 just after the bombings, ]Dr. Peter Burke[, chief of trauma care, told reporters Wednesday.]\",\"prefix\":\" condition, down from 11 just after the bombings, \",\"exact\":\"Dr. Peter Burke\",\"suffix\":\", chief of trauma care, told reporters Wednesday.\",\"offset\":5653,\"length\":15},{\"detection\":\"[condition and seven are in fair condition, ]he[ said.\\nThe incident deeply affected thousands,]\",\"prefix\":\"condition and seven are in fair condition, \",\"exact\":\"he\",\"suffix\":\" said.\\nThe incident deeply affected thousands,\",\"offset\":5789,\"length\":2}]},\"http://d.opencalais.com/genericHasher-1/d9e46be6-a122-3e47-b8a2-ced0a4c8e32f\":{\"_typeGroup\":\"entities\",\"_type\":\"IndustryTerm\",\"name\":\"metal container\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/IndustryTerm\",\"instances\":[{\"detection\":\"[said.\\nThe second bomb was also housed in a ]metal container[, but it was not clear whether it too was in a]\",\"prefix\":\"said.\\nThe second bomb was also housed in a \",\"exact\":\"metal container\",\"suffix\":\", but it was not clear whether it too was in a\",\"offset\":1244,\"length\":15}]},\"http://d.opencalais.com/pershash-1/bc3218bd-170d-3f29-b46e-ae82b715498f\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Martin Richard\",\"persontype\":\"N/A\",\"nationality\":\"N/A\",\"commonname\":\"Martin Richard\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[Campbell, 29, of Arlington, Massachusetts, and ]Martin Richard[, 8, of Dorchester, Massachusetts.\\n\\\"She was the]\",\"prefix\":\"Campbell, 29, of Arlington, Massachusetts, and \",\"exact\":\"Martin Richard\",\"suffix\":\", 8, of Dorchester, Massachusetts.\\n\\\"She was the\",\"offset\":3512,\"length\":14},{\"detection\":\"[\\\"You couldn't ask for a better daughter.\\\"\\n]Martin[ \\\"was a bright, energetic young boy who had big]\",\"prefix\":\"\\\"You couldn't ask for a better daughter.\\\"\\n\",\"exact\":\"Martin\",\"suffix\":\" \\\"was a bright, energetic young boy who had big\",\"offset\":3684,\"length\":6},{\"detection\":\"[young boy who had big dreams and high hopes for ]his[ future,\\\" his school said in a statement. \\\"We are]\",\"prefix\":\"young boy who had big dreams and high hopes for \",\"exact\":\"his\",\"suffix\":\" future,\\\" his school said in a statement. \\\"We are\",\"offset\":3764,\"length\":3},{\"detection\":\"[had big dreams and high hopes for his future,\\\" ]his[ school said in a statement. \\\"We are heartbroken]\",\"prefix\":\"had big dreams and high hopes for his future,\\\" \",\"exact\":\"his\",\"suffix\":\" school said in a statement. \\\"We are heartbroken\",\"offset\":3777,\"length\":3},{\"detection\":\"[ 'Everyone was my patient' Remembering 8-year-old ]Martin Richard[\\nThe hunt for the attacker\\nThe attack left Boston]\",\"prefix\":\" 'Everyone was my patient' Remembering 8-year-old \",\"exact\":\"Martin Richard\",\"suffix\":\"\\nThe hunt for the attacker\\nThe attack left Boston\",\"offset\":3945,\"length\":14}]},\"http://d.opencalais.com/pershash-1/827fe2a9-800c-3e9a-891d-8d93db53921a\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Fran Townsend\",\"persontype\":\"economic\",\"nationality\":\"N/A\",\"commonname\":\"Fran Townsend\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[a federal law enforcement source told CNN's ]Fran Townsend[.\\nDetails about the suspect's identity and motive]\",\"prefix\":\"a federal law enforcement source told CNN's \",\"exact\":\"Fran Townsend\",\"suffix\":\".\\nDetails about the suspect's identity and motive\",\"offset\":131,\"length\":13},{\"detection\":\"[attack, the federal law enforcement source told ]Townsend[.\\nOne of the videos was surveillance footage]\",\"prefix\":\"attack, the federal law enforcement source told \",\"exact\":\"Townsend\",\"suffix\":\".\\nOne of the videos was surveillance footage\",\"offset\":399,\"length\":8}]},\"http://d.opencalais.com/pershash-1/f79eeedc-6e0f-32bd-9316-156186055961\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Eric Rudolph\",\"persontype\":\"N/A\",\"nationality\":\"N/A\",\"commonname\":\"Eric Rudolph\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[has the hallmarks of a domestic terrorist like ]Eric Rudolph[ in the 1996 Atlanta Summer Olympics]\",\"prefix\":\"has the hallmarks of a domestic terrorist like \",\"exact\":\"Eric Rudolph\",\"suffix\":\" in the 1996 Atlanta Summer Olympics\",\"offset\":2944,\"length\":12}]},\"http://d.opencalais.com/genericHasher-1/55ccb46b-68ce-3750-a326-6bdd742672fc\":{\"_typeGroup\":\"entities\",\"_type\":\"Region\",\"name\":\"Middle East\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Region\",\"instances\":[{\"detection\":\"[your experience and your expertise is ]Middle East[ terrorism, it has the hallmarks of al Qaeda or a]\",\"prefix\":\"your experience and your expertise is \",\"exact\":\"Middle East\",\"suffix\":\" terrorism, it has the hallmarks of al Qaeda or a\",\"offset\":2688,\"length\":11},{\"detection\":\"[ terrorism, it has the hallmarks of al Qaeda or a ]Middle East[ group,\\\" former FBI Assistant Director Tom]\",\"prefix\":\" terrorism, it has the hallmarks of al Qaeda or a \",\"exact\":\"Middle East\",\"suffix\":\" group,\\\" former FBI Assistant Director Tom\",\"offset\":2749,\"length\":11}]},\"http://d.opencalais.com/genericHasher-1/86733e41-5f8a-3fd7-8827-3e3f52f6c01a\":{\"_typeGroup\":\"entities\",\"_type\":\"IndustryTerm\",\"name\":\"law enforcement source\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/IndustryTerm\",\"instances\":[{\"detection\":\"[ 6 liters (about 1.6 gallons) in volume, a Boston ]law enforcement source[ said. The recovered parts include part of a]\",\"prefix\":\" 6 liters (about 1.6 gallons) in volume, a Boston \",\"exact\":\"law enforcement source\",\"suffix\":\" said. The recovered parts include part of a\",\"offset\":2052,\"length\":22}]},\"http://d.opencalais.com/genericHasher-1/0c5fcccf-48dc-3510-8d90-499a978aa567\":{\"_typeGroup\":\"entities\",\"_type\":\"Organization\",\"name\":\"Massachusetts General Hospital\",\"organizationtype\":\"N/A\",\"nationality\":\"American\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Organization\",\"instances\":[{\"detection\":\"[George Velmahos, head of trauma care at ]Massachusetts General Hospital[, said his team found metal pellets and nails]\",\"prefix\":\"George Velmahos, head of trauma care at \",\"exact\":\"Massachusetts General Hospital\",\"suffix\":\", said his team found metal pellets and nails\",\"offset\":4749,\"length\":30}]},\"http://d.opencalais.com/genericHasher-1/b2ab765b-a904-3392-a11d-d5072730c027\":{\"_typeGroup\":\"entities\",\"_type\":\"Facility\",\"name\":\"Taylor department store\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Facility\",\"instances\":[{\"detection\":\"[surveillance footage taken at the nearby Lord & ]Taylor department store[, the other was shot by a Boston television]\",\"prefix\":\"surveillance footage taken at the nearby Lord & \",\"exact\":\"Taylor department store\",\"suffix\":\", the other was shot by a Boston television\",\"offset\":479,\"length\":23}]},\"http://d.opencalais.com/genericHasher-1/83e99a76-918f-31b4-b6bf-7ef9e857ffe4\":{\"_typeGroup\":\"entities\",\"_type\":\"Position\",\"name\":\"law enforcement official\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Position\",\"instances\":[{\"detection\":\"[ which might have been used to detonate a device.\\n]A law enforcement official[ said Monday's bombs were probably detonated by]\",\"prefix\":\" which might have been used to detonate a device.\\n\",\"exact\":\"A law enforcement official\",\"suffix\":\" said Monday's bombs were probably detonated by\",\"offset\":2183,\"length\":26}]},\"http://d.opencalais.com/genericHasher-1/4638f631-2f07-36d0-9b33-23afe1dcacb5\":{\"_typeGroup\":\"entities\",\"_type\":\"Organization\",\"name\":\"Boston University\",\"organizationtype\":\"N/A\",\"nationality\":\"American\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Organization\",\"instances\":[{\"detection\":\"[Why is this so rare?\\nThird victim identified\\n]Boston University[ identified graduate student Lingzu Lu as the]\",\"prefix\":\"Why is this so rare?\\nThird victim identified\\n\",\"exact\":\"Boston University\",\"suffix\":\" identified graduate student Lingzu Lu as the\",\"offset\":3323,\"length\":17}]},\"http://d.opencalais.com/genericHasher-1/e019adaf-7914-371d-928b-d1a0c24788d8\":{\"_typeGroup\":\"entities\",\"_type\":\"IndustryTerm\",\"name\":\"metal pellets\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/IndustryTerm\",\"instances\":[{\"detection\":\"[a shredded black backpack and what appear to be ]metal pellets[ or ball bearings.\\nScraps of at least one]\",\"prefix\":\"a shredded black backpack and what appear to be \",\"exact\":\"metal pellets\",\"suffix\":\" or ball bearings.\\nScraps of at least one\",\"offset\":1687,\"length\":13}]},\"http://d.opencalais.com/genericHasher-1/aace28ec-e4e2-3ad0-9a59-806a900252a9\":{\"_typeGroup\":\"entities\",\"_type\":\"City\",\"name\":\"Boston\",\"resolutions\":[{\"id\":\"http://d.opencalais.com/er/geo/city/ralg-geo1/4bd2b5f0-515b-ca0e-8698-3c8cace21ac2\",\"name\":\"Boston,Massachusetts,United States\",\"shortname\":\"Boston\",\"containedbystate\":\"Massachusetts\",\"containedbycountry\":\"United States\",\"latitude\":\"42.3583\",\"longitude\":\"-71.0603\"}],\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/City\",\"instances\":[{\"detection\":\"[was 6 liters (about 1.6 gallons) in volume, a ]Boston[ law enforcement source said. The recovered parts]\",\"prefix\":\"was 6 liters (about 1.6 gallons) in volume, a \",\"exact\":\"Boston\",\"suffix\":\" law enforcement source said. The recovered parts\",\"offset\":2045,\"length\":6},{\"detection\":\"[or foreign terrorism.\\n Tracking suspects in the ]Boston[ bombings New clues in Boston Marathon]\",\"prefix\":\"or foreign terrorism.\\n Tracking suspects in the \",\"exact\":\"Boston\",\"suffix\":\" bombings New clues in Boston Marathon\",\"offset\":2510,\"length\":6},{\"detection\":\"[in Boston Marathon attack\\nPhotos: Nation mourns ]Boston[ bomb victims\\n Photos: Deadly attack at Boston]\",\"prefix\":\"in Boston Marathon attack\\nPhotos: Nation mourns \",\"exact\":\"Boston\",\"suffix\":\" bomb victims\\n Photos: Deadly attack at Boston\",\"offset\":2584,\"length\":6},{\"detection\":\"[from Iraq to the United States -- and finds the ]Boston[ attack has elements of both. \\\"It has the]\",\"prefix\":\"from Iraq to the United States -- and finds the \",\"exact\":\"Boston\",\"suffix\":\" attack has elements of both. \\\"It has the\",\"offset\":3127,\"length\":6},{\"detection\":\"[ this loss.\\\"\\n Source: Bomb was in pressure cooker ]Boston[ doctor: 'Everyone was my patient' Remembering]\",\"prefix\":\" this loss.\\\"\\n Source: Bomb was in pressure cooker \",\"exact\":\"Boston\",\"suffix\":\" doctor: 'Everyone was my patient' Remembering\",\"offset\":3881,\"length\":6},{\"detection\":\"[the special agent in charge of the FBI's ]Boston[ office said prior to the arrest. \\\"Cooperation]\",\"prefix\":\"the special agent in charge of the FBI's \",\"exact\":\"Boston\",\"suffix\":\" office said prior to the arrest. \\\"Cooperation\",\"offset\":4457,\"length\":6}]},\"http://d.opencalais.com/genericHasher-1/873e6e3c-c7e4-3b11-b029-2906808ed784\":{\"_typeGroup\":\"entities\",\"_type\":\"IndustryTerm\",\"name\":\"federal law enforcement source\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/IndustryTerm\",\"instances\":[{\"detection\":\"[in the fatal bombings at the Boston Marathon, a ]federal law enforcement source[ told CNN's Fran Townsend.\\nDetails about the]\",\"prefix\":\"in the fatal bombings at the Boston Marathon, a \",\"exact\":\"federal law enforcement source\",\"suffix\":\" told CNN's Fran Townsend.\\nDetails about the\",\"offset\":89,\"length\":30},{\"detection\":\"[on two videos taken before Monday's attack, the ]federal law enforcement source[ told Townsend.\\nOne of the videos was]\",\"prefix\":\"on two videos taken before Monday's attack, the \",\"exact\":\"federal law enforcement source\",\"suffix\":\" told Townsend.\\nOne of the videos was\",\"offset\":363,\"length\":30}]},\"http://d.opencalais.com/genericHasher-1/6970d84d-53cb-3b52-9064-063fcda5a5fb\":{\"_typeGroup\":\"entities\",\"_type\":\"Country\",\"name\":\"Iraq\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Country\",\"instances\":[{\"detection\":\"[ has investigated both types of terrorism -- from ]Iraq[ to the United States -- and finds the Boston]\",\"prefix\":\" has investigated both types of terrorism -- from \",\"exact\":\"Iraq\",\"suffix\":\" to the United States -- and finds the Boston\",\"offset\":3084,\"length\":4}],\"resolutions\":[{\"id\":\"http://d.opencalais.com/er/geo/country/ralg-geo1/d3b1cee2-327c-fa35-7dab-f0289958c024\",\"name\":\"Iraq\",\"latitude\":\"33.0\",\"longitude\":\"44.0\"}]},\"http://d.opencalais.com/genericHasher-1/aea63919-6dd0-321f-a56b-9d9f083ca55f\":{\"_typeGroup\":\"entities\",\"_type\":\"Organization\",\"name\":\"Federal Bureau of Investigation\",\"organizationtype\":\"governmental civilian\",\"nationality\":\"N/A\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Organization\",\"instances\":[{\"detection\":\"[a pressure cooker hidden inside a backpack, the ]FBI[ said in a joint intelligence bulletin. The]\",\"prefix\":\"a pressure cooker hidden inside a backpack, the \",\"exact\":\"FBI\",\"suffix\":\" said in a joint intelligence bulletin. The\",\"offset\":1064,\"length\":3},{\"detection\":\"[whether it too was in a pressure cooker, the ]FBI[ said.\\nThe U.S. government has warned federal]\",\"prefix\":\"whether it too was in a pressure cooker, the \",\"exact\":\"FBI\",\"suffix\":\" said.\\nThe U.S. government has warned federal\",\"offset\":1327,\"length\":3},{\"detection\":\"[nylon bags found at the scene were sent to the ]FBI['s national laboratory in Virginia, where]\",\"prefix\":\"nylon bags found at the scene were sent to the \",\"exact\":\"FBI\",\"suffix\":\"'s national laboratory in Virginia, where\",\"offset\":1816,\"length\":3},{\"detection\":\"[ bombs were probably detonated by timers. But the ]FBI[ said details of the detonating system were]\",\"prefix\":\" bombs were probably detonated by timers. But the \",\"exact\":\"FBI\",\"suffix\":\" said details of the detonating system were\",\"offset\":2273,\"length\":3},{\"detection\":\"[of al Qaeda or a Middle East group,\\\" former ]FBI[ Assistant Director Tom Fuentes said. \\\"If your]\",\"prefix\":\"of al Qaeda or a Middle East group,\\\" former \",\"exact\":\"FBI\",\"suffix\":\" Assistant Director Tom Fuentes said. \\\"If your\",\"offset\":2776,\"length\":3},{\"detection\":\"[DesLauriers, the special agent in charge of the ]FBI['s Boston office said prior to the arrest.]\",\"prefix\":\"DesLauriers, the special agent in charge of the \",\"exact\":\"FBI\",\"suffix\":\"'s Boston office said prior to the arrest.\",\"offset\":4451,\"length\":3}]},\"http://d.opencalais.com/pershash-1/1dcb89e5-56ce-3f9b-a6aa-d1ecb82eabb0\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Ron Walls\",\"persontype\":\"N/A\",\"nationality\":\"N/A\",\"commonname\":\"Ron Walls\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[medicine said.\\n'Human spirit' still alive\\n]Dr. Ron Walls[ also said one patient had more than 12]\",\"prefix\":\"medicine said.\\n'Human spirit' still alive\\n\",\"exact\":\"Dr. Ron Walls\",\"suffix\":\" also said one patient had more than 12\",\"offset\":5231,\"length\":13},{\"detection\":\"[for the purpose of being exploded forward,\\\" ]he[ said.\\nVictims continue recovery\\nAs investigators]\",\"prefix\":\"for the purpose of being exploded forward,\\\" \",\"exact\":\"he\",\"suffix\":\" said.\\nVictims continue recovery\\nAs investigators\",\"offset\":5423,\"length\":2}]},\"http://d.opencalais.com/pershash-1/96aca5ac-52c3-3e86-9f6f-fc86f287e0bc\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Tom Fuentes\",\"persontype\":\"political\",\"nationality\":\"N/A\",\"commonname\":\"Tom Fuentes\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[East group,\\\" former FBI Assistant Director ]Tom Fuentes[ said. \\\"If your experience is domestic groups and]\",\"prefix\":\"East group,\\\" former FBI Assistant Director \",\"exact\":\"Tom Fuentes\",\"suffix\":\" said. \\\"If your experience is domestic groups and\",\"offset\":2799,\"length\":11},{\"detection\":\"[Summer Olympics bombings.\\\"\\nThings we know\\n]Fuentes[ said he has investigated both types of terrorism]\",\"prefix\":\"Summer Olympics bombings.\\\"\\nThings we know\\n\",\"exact\":\"Fuentes\",\"suffix\":\" said he has investigated both types of terrorism\",\"offset\":3019,\"length\":7},{\"detection\":\"[Olympics bombings.\\\"\\nThings we know\\nFuentes said ]he[ has investigated both types of terrorism -- from]\",\"prefix\":\"Olympics bombings.\\\"\\nThings we know\\nFuentes said \",\"exact\":\"he\",\"suffix\":\" has investigated both types of terrorism -- from\",\"offset\":3032,\"length\":2}]},\"http://d.opencalais.com/pershash-1/09db261e-51a3-38ec-9395-9c801d5ac040\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"John King\",\"persontype\":\"economic\",\"nationality\":\"N/A\",\"commonname\":\"John King\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[on the investigation exclusively told CNN's ]John King[.\\nThe development came after a chaotic day in]\",\"prefix\":\"on the investigation exclusively told CNN's \",\"exact\":\"John King\",\"suffix\":\".\\nThe development came after a chaotic day in\",\"offset\":633,\"length\":9}]},\"http://d.opencalais.com/genericHasher-1/c10a1438-626f-3130-89dd-45d9820de64a\":{\"_typeGroup\":\"entities\",\"_type\":\"SportsEvent\",\"name\":\"the Boston Marathon\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/SportsEvent\",\"instances\":[{\"detection\":\"[a suspect Wednesday in the fatal bombings at ]the Boston Marathon[, a federal law enforcement source told CNN's]\",\"prefix\":\"a suspect Wednesday in the fatal bombings at \",\"exact\":\"the Boston Marathon\",\"suffix\":\", a federal law enforcement source told CNN's\",\"offset\":66,\"length\":19},{\"detection\":\"[12 seconds apart near the finish line of ]the Boston Marathon[, killing three people and wounding about 180]\",\"prefix\":\"12 seconds apart near the finish line of \",\"exact\":\"the Boston Marathon\",\"suffix\":\", killing three people and wounding about 180\",\"offset\":912,\"length\":19},{\"detection\":\"[in a million years I would be a spectator at ]the Boston Marathon[ running for my life.\\\"]\",\"prefix\":\"in a million years I would be a spectator at \",\"exact\":\"the Boston Marathon\",\"suffix\":\" running for my life.\\\"\",\"offset\":6422,\"length\":19}]},\"http://d.opencalais.com/genericHasher-1/593813d2-3e1a-3bcd-ac38-c68e948b18e4\":{\"_typeGroup\":\"entities\",\"_type\":\"Organization\",\"name\":\"Boston police\",\"organizationtype\":\"governmental civilian\",\"nationality\":\"American\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Organization\",\"instances\":[{\"detection\":\"[hunt for the attacker\\nThe attack left ]Boston police[ with \\\"the most complex crime scene that we've]\",\"prefix\":\"hunt for the attacker\\nThe attack left \",\"exact\":\"Boston police\",\"suffix\":\" with \\\"the most complex crime scene that we've\",\"offset\":4002,\"length\":13}]},\"http://d.opencalais.com/genericHasher-1/dfba6002-ef9b-3da4-918b-6fcc774da615\":{\"_typeGroup\":\"entities\",\"_type\":\"Position\",\"name\":\"chief\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Position\",\"instances\":[{\"detection\":\"[11 just after the bombings, Dr. Peter Burke, ]chief[ of trauma care, told reporters Wednesday. Ten]\",\"prefix\":\"11 just after the bombings, Dr. Peter Burke, \",\"exact\":\"chief\",\"suffix\":\" of trauma care, told reporters Wednesday. Ten\",\"offset\":5670,\"length\":5}]},\"http://d.opencalais.com/genericHasher-1/7acdcb17-60d8-35c2-ad99-3b224d74f25f\":{\"_typeGroup\":\"entities\",\"_type\":\"ProvinceOrState\",\"name\":\"Massachusetts\",\"resolutions\":[{\"id\":\"http://d.opencalais.com/er/geo/provinceorstate/ralg-geo1/5c5159b9-d2c3-3b97-85d3-5b4e3692f320\",\"name\":\"Massachusetts,United States\",\"shortname\":\"Massachusetts\",\"containedbycountry\":\"United States\",\"latitude\":\"42.3\",\"longitude\":\"-71.8\"}],\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/ProvinceOrState\",\"instances\":[{\"detection\":\"[were Krystle Campbell, 29, of Arlington, ]Massachusetts[, and Martin Richard, 8, of Dorchester,]\",\"prefix\":\"were Krystle Campbell, 29, of Arlington, \",\"exact\":\"Massachusetts\",\"suffix\":\", and Martin Richard, 8, of Dorchester,\",\"offset\":3493,\"length\":13},{\"detection\":\"[and Martin Richard, 8, of Dorchester, ]Massachusetts[.\\n\\\"She was the best,\\\" Campbell's distraught]\",\"prefix\":\"and Martin Richard, 8, of Dorchester, \",\"exact\":\"Massachusetts\",\"suffix\":\".\\n\\\"She was the best,\\\" Campbell's distraught\",\"offset\":3546,\"length\":13}]},\"http://d.opencalais.com/genericHasher-1/b39b0160-56b3-38dd-a006-2c11afae46f1\":{\"_typeGroup\":\"entities\",\"_type\":\"SportsEvent\",\"name\":\"Boston Marathon\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/SportsEvent\",\"instances\":[{\"detection\":\"[suspects in the Boston bombings New clues in ]Boston Marathon[ attack\\nPhotos: Nation mourns Boston bomb]\",\"prefix\":\"suspects in the Boston bombings New clues in \",\"exact\":\"Boston Marathon\",\"suffix\":\" attack\\nPhotos: Nation mourns Boston bomb\",\"offset\":2539,\"length\":15},{\"detection\":\"[Boston bomb victims\\n Photos: Deadly attack at ]Boston Marathon[\\n\\\"If your experience and your expertise is Middle]\",\"prefix\":\"Boston bomb victims\\n Photos: Deadly attack at \",\"exact\":\"Boston Marathon\",\"suffix\":\"\\n\\\"If your experience and your expertise is Middle\",\"offset\":2630,\"length\":15}]},\"http://d.opencalais.com/comphash-1/082c52ce-9eb3-320d-ac3b-f6be116a890f\":{\"_typeGroup\":\"entities\",\"_type\":\"Company\",\"name\":\"CNN\",\"nationality\":\"N/A\",\"resolutions\":[{\"id\":\"http://d.opencalais.com/er/company/ralg-tr1r/8a1a532d-ca4d-3f45-b5e7-b8ef6f17dcf5\",\"score\":1,\"name\":\"CNN INTERNATIONAL\",\"shortname\":\"CNN\"}],\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Company\",\"instances\":[{\"detection\":\"[Marathon, a federal law enforcement source told ]CNN['s Fran Townsend.\\nDetails about the suspect's]\",\"prefix\":\"Marathon, a federal law enforcement source told \",\"exact\":\"CNN\",\"suffix\":\"'s Fran Townsend.\\nDetails about the suspect's\",\"offset\":125,\"length\":3},{\"detection\":\"[News of the arrest was first reported by ]CNN[.\\nInvestigators identified the suspect based on]\",\"prefix\":\"News of the arrest was first reported by \",\"exact\":\"CNN\",\"suffix\":\".\\nInvestigators identified the suspect based on\",\"offset\":267,\"length\":3},{\"detection\":\"[briefed on the investigation exclusively told ]CNN['s John King.\\nThe development came after a]\",\"prefix\":\"briefed on the investigation exclusively told \",\"exact\":\"CNN\",\"suffix\":\"'s John King.\\nThe development came after a\",\"offset\":627,\"length\":3},{\"detection\":\"[ with blasting caps.\\nThe bombs\\nPhotos obtained by ]CNN[ show the remains of a pressure cooker found at]\",\"prefix\":\" with blasting caps.\\nThe bombs\\nPhotos obtained by \",\"exact\":\"CNN\",\"suffix\":\" show the remains of a pressure cooker found at\",\"offset\":1566,\"length\":3}]},\"http://d.opencalais.com/genericHasher-1/88a5fd3c-ccab-396a-853e-1631b1c5bb06\":{\"_typeGroup\":\"entities\",\"_type\":\"City\",\"name\":\"Dorchester\",\"resolutions\":[{\"id\":\"http://d.opencalais.com/er/geo/city/ralg-geo1/d0c5fe7a-913e-d41d-2141-fb1bb156b30a\",\"name\":\"Dorchester,Massachusetts,United States\",\"shortname\":\"Dorchester\",\"containedbystate\":\"Massachusetts\",\"containedbycountry\":\"United States\",\"latitude\":\"42.2972\",\"longitude\":\"-71.0744\"}],\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/City\",\"instances\":[{\"detection\":\"[Massachusetts, and Martin Richard, 8, of ]Dorchester[, Massachusetts.\\n\\\"She was the best,\\\" Campbell's]\",\"prefix\":\"Massachusetts, and Martin Richard, 8, of \",\"exact\":\"Dorchester\",\"suffix\":\", Massachusetts.\\n\\\"She was the best,\\\" Campbell's\",\"offset\":3534,\"length\":10}]},\"http://d.opencalais.com/genericHasher-1/719fb3a8-52c0-326a-8f84-5867aeceda93\":{\"_typeGroup\":\"entities\",\"_type\":\"Position\",\"name\":\"special agent\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Position\",\"instances\":[{\"detection\":\"[knows who did this,\\\" said Rick DesLauriers, ]the special agent[ in charge of the FBI's Boston office said prior]\",\"prefix\":\"knows who did this,\\\" said Rick DesLauriers, \",\"exact\":\"the special agent\",\"suffix\":\" in charge of the FBI's Boston office said prior\",\"offset\":4416,\"length\":17}]},\"http://d.opencalais.com/genericHasher-1/c92e57bc-591f-38a9-bc57-e073f74da3e4\":{\"_typeGroup\":\"entities\",\"_type\":\"City\",\"name\":\"Arlington\",\"resolutions\":[{\"id\":\"http://d.opencalais.com/er/geo/city/ralg-geo1/b1f6c108-2d62-b289-7655-4d612237ce78\",\"name\":\"Arlington,Massachusetts,United States\",\"shortname\":\"Arlington\",\"containedbystate\":\"Massachusetts\",\"containedbycountry\":\"United States\",\"latitude\":\"42.4153\",\"longitude\":\"-71.1569\"}],\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/City\",\"instances\":[{\"detection\":\"[identified were Krystle Campbell, 29, of ]Arlington[, Massachusetts, and Martin Richard, 8, of]\",\"prefix\":\"identified were Krystle Campbell, 29, of \",\"exact\":\"Arlington\",\"suffix\":\", Massachusetts, and Martin Richard, 8, of\",\"offset\":3482,\"length\":9}]},\"http://d.opencalais.com/genericHasher-1/8a3665f0-88e3-3555-9673-b91780e8a765\":{\"_typeGroup\":\"entities\",\"_type\":\"SportsEvent\",\"name\":\"Summer Olympics\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/SportsEvent\",\"instances\":[{\"detection\":\"[terrorist like Eric Rudolph in the 1996 Atlanta ]Summer Olympics[ bombings.\\\"\\nThings we know\\nFuentes said he has]\",\"prefix\":\"terrorist like Eric Rudolph in the 1996 Atlanta \",\"exact\":\"Summer Olympics\",\"suffix\":\" bombings.\\\"\\nThings we know\\nFuentes said he has\",\"offset\":2977,\"length\":15}]},\"http://d.opencalais.com/pershash-1/177615df-cae1-31d2-b53b-84d89c063cd5\":{\"_typeGroup\":\"entities\",\"_type\":\"Person\",\"name\":\"Krystle Campbell\",\"persontype\":\"N/A\",\"nationality\":\"N/A\",\"commonname\":\"Krystle Campbell\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/e/Person\",\"instances\":[{\"detection\":\"[ in Monday's bombings.\\nPreviously identified were ]Krystle Campbell[, 29, of Arlington, Massachusetts, and Martin]\",\"prefix\":\" in Monday's bombings.\\nPreviously identified were \",\"exact\":\"Krystle Campbell\",\"suffix\":\", 29, of Arlington, Massachusetts, and Martin\",\"offset\":3457,\"length\":16},{\"detection\":\"[Richard, 8, of Dorchester, Massachusetts.\\n\\\"]She[ was the best,\\\" Campbell's distraught mother,]\",\"prefix\":\"Richard, 8, of Dorchester, Massachusetts.\\n\\\"\",\"exact\":\"She\",\"suffix\":\" was the best,\\\" Campbell's distraught mother,\",\"offset\":3562,\"length\":3},{\"detection\":\"[Dorchester, Massachusetts.\\n\\\"She was the best,\\\" ]Campbell['s distraught mother, Patty, told reporters]\",\"prefix\":\"Dorchester, Massachusetts.\\n\\\"She was the best,\\\" \",\"exact\":\"Campbell\",\"suffix\":\"'s distraught mother, Patty, told reporters\",\"offset\":3581,\"length\":8}]},\"http://d.opencalais.com/genericHasher-1/fde85f1e-054d-3944-8d20-150eee8bef34\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCareer\",\"careertype\":\"professional\",\"status\":\"current\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCareer\",\"person\":\"http://d.opencalais.com/pershash-1/09db261e-51a3-38ec-9395-9c801d5ac040\",\"company\":\"http://d.opencalais.com/comphash-1/082c52ce-9eb3-320d-ac3b-f6be116a890f\",\"instances\":[{\"detection\":\"[briefed on the investigation exclusively told ]CNN's John King[.\\nThe development came after a chaotic day in]\",\"prefix\":\"briefed on the investigation exclusively told \",\"exact\":\"CNN's John King\",\"suffix\":\".\\nThe development came after a chaotic day in\",\"offset\":627,\"length\":15}]},\"http://d.opencalais.com/genericHasher-1/8234ea17-e864-31f8-9149-a552f4c01e73\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"quote\":\"They are numerous.; There are people who have 10, 20, 30, 40 of them in their body, or more\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/2e874661-9d32-304a-a5a9-f5107b08b52b\",\"instances\":[{\"detection\":\"[ metal pellets and nails inside patients' bodies.\\n]\\\"They are numerous. There are people who have 10, 20, 30, 40 of them in their body, or more,\\\" Velmahos said.[\\nWhile most of the patients treated at Brigham]\",\"prefix\":\" metal pellets and nails inside patients' bodies.\\n\",\"exact\":\"\\\"They are numerous. There are people who have 10, 20, 30, 40 of them in their body, or more,\\\" Velmahos said.\",\"suffix\":\"\\nWhile most of the patients treated at Brigham\",\"offset\":4850,\"length\":108}]},\"http://d.opencalais.com/genericHasher-1/42d918f4-e8fb-3c84-9aa3-d51cae773216\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"persondescription\":\"Campbell's distraught mother\",\"quote\":\"She was the best; You couldn't ask for a better daughter.\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/b3ba1da6-6621-375c-8bd6-c171ebcf8d6e\",\"instances\":[{\"detection\":\"[ Martin Richard, 8, of Dorchester, Massachusetts.\\n]\\\"She was the best,\\\" Campbell's distraught mother, Patty, told reporters Tuesday. \\\"You couldn't ask for a better daughter.\\\"[\\nMartin \\\"was a bright, energetic young boy who]\",\"prefix\":\" Martin Richard, 8, of Dorchester, Massachusetts.\\n\",\"exact\":\"\\\"She was the best,\\\" Campbell's distraught mother, Patty, told reporters Tuesday. \\\"You couldn't ask for a better daughter.\\\"\",\"suffix\":\"\\nMartin \\\"was a bright, energetic young boy who\",\"offset\":3561,\"length\":122}]},\"http://d.opencalais.com/genericHasher-1/60282ff2-6734-3d6a-bf47-15c0e0fae94f\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"persondescription\":\"Commissioner\",\"quote\":\"the most complex crime scene that we've dealt with in the history of our department\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/91bde208-9dc4-3197-9c3b-aec7e213166a\",\"instances\":[{\"detection\":\"[ a statement. \\\"We are heartbroken by this loss.\\\"\\n ]Source: Bomb was in pressure cooker Boston doctor: 'Everyone was my patient' Remembering 8-year-old Martin Richard\\nThe hunt for the attacker\\nThe attack left Boston police with \\\"the most complex crime scene that we've dealt with in the history of our department,\\\" Commissioner Ed Davis said Tuesday.[\\nAuthorities sifted through thousands of pieces]\",\"prefix\":\" a statement. \\\"We are heartbroken by this loss.\\\"\\n \",\"exact\":\"Source: Bomb was in pressure cooker Boston doctor: 'Everyone was my patient' Remembering 8-year-old Martin Richard\\nThe hunt for the attacker\\nThe attack left Boston police with \\\"the most complex crime scene that we've dealt with in the history of our department,\\\" Commissioner Ed Davis said Tuesday.\",\"suffix\":\"\\nAuthorities sifted through thousands of pieces\",\"offset\":3845,\"length\":298}]},\"http://d.opencalais.com/genericHasher-1/54404ed3-7045-306f-b848-39e37fe07f84\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCareer\",\"careertype\":\"professional\",\"status\":\"current\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCareer\",\"person\":\"http://d.opencalais.com/pershash-1/827fe2a9-800c-3e9a-891d-8d93db53921a\",\"company\":\"http://d.opencalais.com/comphash-1/082c52ce-9eb3-320d-ac3b-f6be116a890f\",\"instances\":[{\"detection\":\"[Marathon, a federal law enforcement source told ]CNN's Fran Townsend[.\\nDetails about the suspect's identity and motive]\",\"prefix\":\"Marathon, a federal law enforcement source told \",\"exact\":\"CNN's Fran Townsend\",\"suffix\":\".\\nDetails about the suspect's identity and motive\",\"offset\":125,\"length\":19}]},\"http://d.opencalais.com/genericHasher-1/af20cd1a-02d9-3068-9cbb-b7e45055fec1\":{\"_typeGroup\":\"relations\",\"_type\":\"FamilyRelation\",\"familyrelationtype\":\"mother\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/FamilyRelation\",\"person\":\"http://d.opencalais.com/pershash-1/177615df-cae1-31d2-b53b-84d89c063cd5\",\"person_relative\":\"http://d.opencalais.com/pershash-1/b3ba1da6-6621-375c-8bd6-c171ebcf8d6e\",\"instances\":[{\"detection\":\"[Dorchester, Massachusetts.\\n\\\"She was the best,\\\" ]Campbell's distraught mother, Patty[, told reporters Tuesday. \\\"You couldn't ask for a]\",\"prefix\":\"Dorchester, Massachusetts.\\n\\\"She was the best,\\\" \",\"exact\":\"Campbell's distraught mother, Patty\",\"suffix\":\", told reporters Tuesday. \\\"You couldn't ask for a\",\"offset\":3581,\"length\":35}]},\"http://d.opencalais.com/genericHasher-1/0d01fd5c-dc5b-3a81-8ff1-784f235e3878\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonTravel\",\"status\":\"past\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonTravel\",\"person\":\"http://d.opencalais.com/pershash-1/bc3218bd-170d-3f29-b46e-ae82b715498f\",\"locationorigin\":\"http://d.opencalais.com/genericHasher-1/aace28ec-e4e2-3ad0-9a59-806a900252a9\",\"instances\":[{\"detection\":\"[Richard\\nThe hunt for the attacker\\nThe attack ]left Boston[ police with \\\"the most complex crime scene that]\",\"prefix\":\"Richard\\nThe hunt for the attacker\\nThe attack \",\"exact\":\"left Boston\",\"suffix\":\" police with \\\"the most complex crime scene that\",\"offset\":3997,\"length\":11}]},\"http://d.opencalais.com/genericHasher-1/74c6e0cd-9bd4-3ae5-b6d1-860c0ecf9fad\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCareer\",\"careertype\":\"political\",\"status\":\"current\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCareer\",\"person\":\"http://d.opencalais.com/pershash-1/91bde208-9dc4-3197-9c3b-aec7e213166a\",\"position\":\"http://d.opencalais.com/genericHasher-1/192ac1ce-fc94-3876-94c5-88893c412157\",\"instances\":[{\"detection\":\"[dealt with in the history of our department,\\\" ]Commissioner Ed Davis[ said Tuesday.\\nAuthorities sifted through]\",\"prefix\":\"dealt with in the history of our department,\\\" \",\"exact\":\"Commissioner Ed Davis\",\"suffix\":\" said Tuesday.\\nAuthorities sifted through\",\"offset\":4108,\"length\":21}]},\"http://d.opencalais.com/genericHasher-1/8313cc46-b833-3d91-9977-3c0bb77ad41f\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonAttributes\",\"age\":\"8\",\"gender\":\"M\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonAttributes\",\"person\":\"http://d.opencalais.com/pershash-1/bc3218bd-170d-3f29-b46e-ae82b715498f\",\"instances\":[{\"detection\":\"[Campbell, 29, of Arlington, Massachusetts, and ]Martin Richard, 8[, of Dorchester, Massachusetts.\\n\\\"She was the]\",\"prefix\":\"Campbell, 29, of Arlington, Massachusetts, and \",\"exact\":\"Martin Richard, 8\",\"suffix\":\", of Dorchester, Massachusetts.\\n\\\"She was the\",\"offset\":3512,\"length\":17},{\"detection\":\"[doctor: 'Everyone was my patient' Remembering ]8-year-old Martin Richard[\\nThe hunt for the attacker\\nThe attack left Boston]\",\"prefix\":\"doctor: 'Everyone was my patient' Remembering \",\"exact\":\"8-year-old Martin Richard\",\"suffix\":\"\\nThe hunt for the attacker\\nThe attack left Boston\",\"offset\":3934,\"length\":25}]},\"http://d.opencalais.com/genericHasher-1/d721fa66-44a2-30f0-9d96-6250db10190f\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"persondescription\":\"former Assistant Director, Federal Bureau of Investigation\",\"quote\":\"If your experience and your expertise is Middle East terrorism, it has the hallmarks of al Qaeda or a Middle East group; If your experience is domestic groups and bombings that have occurred here, it has the hallmarks of a domestic terrorist like Eric Rudolph in the 1996 Atlanta Summer Olympics bombings.\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/96aca5ac-52c3-3e86-9f6f-fc86f287e0bc\",\"instances\":[{\"detection\":\"[was an act of domestic or foreign terrorism.\\n ]Tracking suspects in the Boston bombings New clues in Boston Marathon attack\\nPhotos: Nation mourns Boston bomb victims\\n Photos: Deadly attack at Boston Marathon\\n\\\"If your experience and your expertise is Middle East terrorism, it has the hallmarks of al Qaeda or a Middle East group,\\\" former FBI Assistant Director Tom Fuentes said. \\\"If your experience is domestic groups and bombings that have occurred here, it has the hallmarks of a domestic terrorist like Eric Rudolph in the 1996 Atlanta Summer Olympics bombings.\\\"[\\nThings we know\\nFuentes said he has investigated]\",\"prefix\":\"was an act of domestic or foreign terrorism.\\n \",\"exact\":\"Tracking suspects in the Boston bombings New clues in Boston Marathon attack\\nPhotos: Nation mourns Boston bomb victims\\n Photos: Deadly attack at Boston Marathon\\n\\\"If your experience and your expertise is Middle East terrorism, it has the hallmarks of al Qaeda or a Middle East group,\\\" former FBI Assistant Director Tom Fuentes said. \\\"If your experience is domestic groups and bombings that have occurred here, it has the hallmarks of a domestic terrorist like Eric Rudolph in the 1996 Atlanta Summer Olympics bombings.\\\"\",\"suffix\":\"\\nThings we know\\nFuentes said he has investigated\",\"offset\":2485,\"length\":518}]},\"http://d.opencalais.com/genericHasher-1/563660a0-b7e7-3047-8fb0-1b85345b7409\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"persondescription\":\"special agent\",\"quote\":\"Someone knows who did this; Cooperation from the community will play a crucial role in this investigation.\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/cf8282f4-6dc1-3b54-9984-35f9c849fcfc\",\"instances\":[{\"detection\":\"[help in providing additional leads and images.\\n]\\\"Someone knows who did this,\\\" said Rick DesLauriers, the special agent in charge of the FBI's Boston office said prior to the arrest. \\\"Cooperation from the community will play a crucial role in this investigation.\\\"[\\nMedical personnel treating the wounded found]\",\"prefix\":\"help in providing additional leads and images.\\n\",\"exact\":\"\\\"Someone knows who did this,\\\" said Rick DesLauriers, the special agent in charge of the FBI's Boston office said prior to the arrest. \\\"Cooperation from the community will play a crucial role in this investigation.\\\"\",\"suffix\":\"\\nMedical personnel treating the wounded found\",\"offset\":4363,\"length\":214}]},\"http://d.opencalais.com/genericHasher-1/a7bc207d-539f-3097-adb6-19268c9393d3\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCareer\",\"careertype\":\"professional\",\"status\":\"current\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCareer\",\"person\":\"http://d.opencalais.com/pershash-1/d6a3a86a-25dc-31aa-ac2e-eded7a10a114\",\"position\":\"http://d.opencalais.com/genericHasher-1/dfba6002-ef9b-3da4-918b-6fcc774da615\",\"instances\":[{\"detection\":\"[ condition, down from 11 just after the bombings, ]Dr. Peter Burke, chief[ of trauma care, told reporters Wednesday. Ten]\",\"prefix\":\" condition, down from 11 just after the bombings, \",\"exact\":\"Dr. Peter Burke, chief\",\"suffix\":\" of trauma care, told reporters Wednesday. Ten\",\"offset\":5653,\"length\":22}]},\"http://d.opencalais.com/genericHasher-1/c990809b-10a1-3e79-9e15-c087a9d69fef\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"quote\":\"he has investigated both types of terrorism -- from Iraq to the United States -- and finds the Boston attack has elements of both\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/96aca5ac-52c3-3e86-9f6f-fc86f287e0bc\",\"instances\":[{\"detection\":\"[in the 1996 Atlanta Summer Olympics bombings.\\\"\\n]Things we know\\nFuentes said he has investigated both types of terrorism -- from Iraq to the United States -- and finds the Boston attack has elements of both.[ \\\"It has the hallmarks of both domestic and]\",\"prefix\":\"in the 1996 Atlanta Summer Olympics bombings.\\\"\\n\",\"exact\":\"Things we know\\nFuentes said he has investigated both types of terrorism -- from Iraq to the United States -- and finds the Boston attack has elements of both.\",\"suffix\":\" \\\"It has the hallmarks of both domestic and\",\"offset\":3004,\"length\":158}]},\"http://d.opencalais.com/genericHasher-1/d6022c14-b0eb-3a9b-b50a-8b63beb748b8\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"persondescription\":\"head of trauma care, Massachusetts General Hospital\",\"quote\":\"his team found metal pellets and nails inside patients' bodies\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/2e874661-9d32-304a-a5a9-f5107b08b52b\",\"instances\":[{\"detection\":\"[or bombmakers sought to maximize the suffering.\\n]Dr. George Velmahos, head of trauma care at Massachusetts General Hospital, said his team found metal pellets and nails inside patients' bodies.[\\n\\\"They are numerous. There are people who have]\",\"prefix\":\"or bombmakers sought to maximize the suffering.\\n\",\"exact\":\"Dr. George Velmahos, head of trauma care at Massachusetts General Hospital, said his team found metal pellets and nails inside patients' bodies.\",\"suffix\":\"\\n\\\"They are numerous. There are people who have\",\"offset\":4705,\"length\":144}]},\"http://d.opencalais.com/genericHasher-1/4750766e-8866-3850-b9f2-28dac4cfdc9f\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"quote\":\"I personally will never participate in an event of this nature in a city in fear that something like this could happen again; I keep replaying the moments of terror over and over in my head and am just still in utter shock. Always seeing terrible things of this nature happen all over the world on TV, my heart would always go out to those directly affected. But I never imagined in a million years I would be a spectator at the Boston Marathon running for my life.\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/9e2fb1e7-cd8c-34c5-a1ea-0052b601b191\",\"instances\":[{\"detection\":\"[\\\"terrifying hell.\\\" She suffered minor injuries.\\n]\\\"I personally will never participate in an event of this nature in a city in fear that something like this could happen again,\\\" she said. \\\"I keep replaying the moments of terror over and over in my head and am just still in utter shock. Always seeing terrible things of this nature happen all over the world on TV, my heart would always go out to those directly affected. But I never imagined in a million years I would be a spectator at the Boston Marathon running for my life.\\\"[]\",\"prefix\":\"\\\"terrifying hell.\\\" She suffered minor injuries.\\n\",\"exact\":\"\\\"I personally will never participate in an event of this nature in a city in fear that something like this could happen again,\\\" she said. \\\"I keep replaying the moments of terror over and over in my head and am just still in utter shock. Always seeing terrible things of this nature happen all over the world on TV, my heart would always go out to those directly affected. But I never imagined in a million years I would be a spectator at the Boston Marathon running for my life.\\\"\",\"offset\":5984,\"length\":479}]},\"http://d.opencalais.com/genericHasher-1/db38040c-e626-34c9-9d61-3fc098b0b92b\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCommunication\",\"persondescription\":\"reporters\",\"status\":\"announced\",\"datestring\":\"Wednesday\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCommunication\",\"person\":\"http://d.opencalais.com/pershash-1/d6a3a86a-25dc-31aa-ac2e-eded7a10a114\",\"instances\":[{\"detection\":\"[ condition, down from 11 just after the bombings, ]Dr. Peter Burke, chief of trauma care, told reporters Wednesday[. Ten patients are in serious condition and seven]\",\"prefix\":\" condition, down from 11 just after the bombings, \",\"exact\":\"Dr. Peter Burke, chief of trauma care, told reporters Wednesday\",\"suffix\":\". Ten patients are in serious condition and seven\",\"offset\":5653,\"length\":63}]},\"http://d.opencalais.com/genericHasher-1/9d705905-2a90-3523-beb3-a42072f951e9\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"quote\":\"There is no question some of these objects were implanted in the device for the purpose of being exploded forward\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/1dcb89e5-56ce-3f9b-a6aa-d1ecb82eabb0\",\"instances\":[{\"detection\":\"[patient had more than 12 carpenter-type nails.\\n]\\\"There is no question some of these objects were implanted in the device for the purpose of being exploded forward,\\\" he said.[\\nVictims continue recovery\\nAs investigators]\",\"prefix\":\"patient had more than 12 carpenter-type nails.\\n\",\"exact\":\"\\\"There is no question some of these objects were implanted in the device for the purpose of being exploded forward,\\\" he said.\",\"suffix\":\"\\nVictims continue recovery\\nAs investigators\",\"offset\":5306,\"length\":125}]},\"http://d.opencalais.com/genericHasher-1/90eb669a-65e8-3891-b787-a467e3a39ff0\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCommunication\",\"persondescription\":\"reporters\",\"status\":\"announced\",\"datestring\":\"Tuesday\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCommunication\",\"person\":\"http://d.opencalais.com/pershash-1/b3ba1da6-6621-375c-8bd6-c171ebcf8d6e\",\"instances\":[{\"detection\":\"[Dorchester, Massachusetts.\\n\\\"She was the best,\\\" ]Campbell's distraught mother, Patty, told reporters Tuesday[. \\\"You couldn't ask for a better]\",\"prefix\":\"Dorchester, Massachusetts.\\n\\\"She was the best,\\\" \",\"exact\":\"Campbell's distraught mother, Patty, told reporters Tuesday\",\"suffix\":\". \\\"You couldn't ask for a better\",\"offset\":3581,\"length\":59}]},\"http://d.opencalais.com/genericHasher-1/a53a62b9-5abd-37c6-865b-f235f65172a1\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"quote\":\"Ten patients are in serious condition and seven are in fair condition\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/d6a3a86a-25dc-31aa-ac2e-eded7a10a114\",\"instances\":[{\"detection\":\"[chief of trauma care, told reporters Wednesday. ]Ten patients are in serious condition and seven are in fair condition, he said.[\\nThe incident deeply affected thousands,]\",\"prefix\":\"chief of trauma care, told reporters Wednesday. \",\"exact\":\"Ten patients are in serious condition and seven are in fair condition, he said.\",\"suffix\":\"\\nThe incident deeply affected thousands,\",\"offset\":5718,\"length\":79}]},\"http://d.opencalais.com/genericHasher-1/7438a91c-a819-3323-a266-50e121104850\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCareer\",\"careertype\":\"professional\",\"status\":\"current\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCareer\",\"person\":\"http://d.opencalais.com/pershash-1/cf8282f4-6dc1-3b54-9984-35f9c849fcfc\",\"position\":\"http://d.opencalais.com/genericHasher-1/719fb3a8-52c0-326a-8f84-5867aeceda93\",\"instances\":[{\"detection\":\"[and images.\\n\\\"Someone knows who did this,\\\" said ]Rick DesLauriers, the special agent[ in charge of the FBI's Boston office said prior]\",\"prefix\":\"and images.\\n\\\"Someone knows who did this,\\\" said \",\"exact\":\"Rick DesLauriers, the special agent\",\"suffix\":\" in charge of the FBI's Boston office said prior\",\"offset\":4398,\"length\":35}]},\"http://d.opencalais.com/genericHasher-1/42bfa155-ec25-35fa-bb21-c48e3a7fa83b\":{\"_typeGroup\":\"relations\",\"_type\":\"ArmedAttack\",\"attacktype\":\"explosion\",\"weaponused\":\"The bombs\",\"status\":\"confirmed\",\"casualties\":\"killing three people and wounding about 180 others\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/ArmedAttack\",\"instances\":[{\"detection\":\"[containing ricin gripped the nation's capital.\\n]The bombs exploded 12 seconds apart near the finish line of the Boston Marathon, killing three people and wounding about 180 others[.\\nOne of the bombs was housed in a pressure]\",\"prefix\":\"containing ricin gripped the nation's capital.\\n\",\"exact\":\"The bombs exploded 12 seconds apart near the finish line of the Boston Marathon, killing three people and wounding about 180 others\",\"suffix\":\".\\nOne of the bombs was housed in a pressure\",\"offset\":852,\"length\":131}]},\"http://d.opencalais.com/genericHasher-1/d2071f57-6f21-3d07-aa91-e8b83e77fcf1\":{\"_typeGroup\":\"relations\",\"_type\":\"Quotation\",\"quote\":\"one patient had more than 12 carpenter-type nails\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/Quotation\",\"person\":\"http://d.opencalais.com/pershash-1/1dcb89e5-56ce-3f9b-a6aa-d1ecb82eabb0\",\"instances\":[{\"detection\":\"[hospital's chairman of emergency medicine said.\\n]'Human spirit' still alive\\nDr. Ron Walls also said one patient had more than 12 carpenter-type nails.[\\n\\\"There is no question some of these objects were]\",\"prefix\":\"hospital's chairman of emergency medicine said.\\n\",\"exact\":\"'Human spirit' still alive\\nDr. Ron Walls also said one patient had more than 12 carpenter-type nails.\",\"suffix\":\"\\n\\\"There is no question some of these objects were\",\"offset\":5204,\"length\":101}]},\"http://d.opencalais.com/genericHasher-1/9ac22c76-1a4c-37b6-9e18-ffd3b5cfb52a\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCareer\",\"careertype\":\"professional\",\"status\":\"past\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCareer\",\"person\":\"http://d.opencalais.com/pershash-1/96aca5ac-52c3-3e86-9f6f-fc86f287e0bc\",\"position\":\"http://d.opencalais.com/genericHasher-1/a67d2065-73ab-30ae-971a-ce00ab5f7eaf\",\"organization\":\"http://d.opencalais.com/genericHasher-1/aea63919-6dd0-321f-a56b-9d9f083ca55f\",\"instances\":[{\"detection\":\"[hallmarks of al Qaeda or a Middle East group,\\\" ]former FBI Assistant Director Tom Fuentes[ said. \\\"If your experience is domestic groups and]\",\"prefix\":\"hallmarks of al Qaeda or a Middle East group,\\\" \",\"exact\":\"former FBI Assistant Director Tom Fuentes\",\"suffix\":\" said. \\\"If your experience is domestic groups and\",\"offset\":2769,\"length\":41}]},\"http://d.opencalais.com/genericHasher-1/7c346129-4ff4-38cf-98f8-0cac4febc0b3\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCommunication\",\"persondescription\":\"source\",\"status\":\"announced\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCommunication\",\"person\":\"http://d.opencalais.com/pershash-1/09db261e-51a3-38ec-9395-9c801d5ac040\",\"instances\":[{\"detection\":\"[other was shot by a Boston television station, ]a source who has has been briefed on the investigation exclusively told CNN's John King[.\\nThe development came after a chaotic day in]\",\"prefix\":\"other was shot by a Boston television station, \",\"exact\":\"a source who has has been briefed on the investigation exclusively told CNN's John King\",\"suffix\":\".\\nThe development came after a chaotic day in\",\"offset\":555,\"length\":87}]},\"http://d.opencalais.com/genericHasher-1/02745db3-4914-3795-8b92-f897a3a2c5b9\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonLocation\",\"locationstring\":\"Dorchester\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonLocation\",\"person\":\"http://d.opencalais.com/pershash-1/bc3218bd-170d-3f29-b46e-ae82b715498f\",\"instances\":[{\"detection\":\"[Campbell, 29, of Arlington, Massachusetts, and ]Martin Richard, 8, of Dorchester, Massachusetts[.\\n\\\"She was the best,\\\" Campbell's distraught]\",\"prefix\":\"Campbell, 29, of Arlington, Massachusetts, and \",\"exact\":\"Martin Richard, 8, of Dorchester, Massachusetts\",\"suffix\":\".\\n\\\"She was the best,\\\" Campbell's distraught\",\"offset\":3512,\"length\":47}]},\"http://d.opencalais.com/genericHasher-1/11e34770-4aa8-350c-9428-a69563c4e7ee\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonAttributes\",\"age\":\"29\",\"gender\":\"F\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonAttributes\",\"person\":\"http://d.opencalais.com/pershash-1/177615df-cae1-31d2-b53b-84d89c063cd5\",\"instances\":[{\"detection\":\"[ in Monday's bombings.\\nPreviously identified were ]Krystle Campbell, 29[, of Arlington, Massachusetts, and Martin]\",\"prefix\":\" in Monday's bombings.\\nPreviously identified were \",\"exact\":\"Krystle Campbell, 29\",\"suffix\":\", of Arlington, Massachusetts, and Martin\",\"offset\":3457,\"length\":20}]},\"http://d.opencalais.com/genericHasher-1/12bcbb8a-9b96-30e8-af79-05d5c7c0a6af\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonLocation\",\"locationstring\":\"Arlington\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonLocation\",\"person\":\"http://d.opencalais.com/pershash-1/177615df-cae1-31d2-b53b-84d89c063cd5\",\"instances\":[{\"detection\":\"[ in Monday's bombings.\\nPreviously identified were ]Krystle Campbell, 29, of Arlington, Massachusetts[, and Martin Richard, 8, of Dorchester,]\",\"prefix\":\" in Monday's bombings.\\nPreviously identified were \",\"exact\":\"Krystle Campbell, 29, of Arlington, Massachusetts\",\"suffix\":\", and Martin Richard, 8, of Dorchester,\",\"offset\":3457,\"length\":49}]},\"http://d.opencalais.com/genericHasher-1/43705492-f4ec-30eb-9f8b-686a3db727fd\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCareer\",\"careertype\":\"professional\",\"status\":\"current\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCareer\",\"person\":\"http://d.opencalais.com/pershash-1/2e874661-9d32-304a-a5a9-f5107b08b52b\",\"position\":\"http://d.opencalais.com/genericHasher-1/1a09614e-c95e-37c0-adee-c4c54320e570\",\"organization\":\"http://d.opencalais.com/genericHasher-1/0c5fcccf-48dc-3510-8d90-499a978aa567\",\"instances\":[{\"detection\":\"[or bombmakers sought to maximize the suffering.\\n]Dr. George Velmahos, head of trauma care at Massachusetts General Hospital[, said his team found metal pellets and nails]\",\"prefix\":\"or bombmakers sought to maximize the suffering.\\n\",\"exact\":\"Dr. George Velmahos, head of trauma care at Massachusetts General Hospital\",\"suffix\":\", said his team found metal pellets and nails\",\"offset\":4705,\"length\":74}]},\"http://d.opencalais.com/genericHasher-1/ecb9bdd3-c7e2-3346-80c0-ce1715d545c0\":{\"_typeGroup\":\"relations\",\"_type\":\"PersonCommunication\",\"persondescription\":\"federal law enforcement source\",\"status\":\"announced\",\"_typeReference\":\"http://s.opencalais.com/1/type/em/r/PersonCommunication\",\"person\":\"http://d.opencalais.com/pershash-1/827fe2a9-800c-3e9a-891d-8d93db53921a\",\"instances\":[{\"detection\":\"[in the fatal bombings at the Boston Marathon, ]a federal law enforcement source told CNN's Fran Townsend[.\\nDetails about the suspect's identity and motive]\",\"prefix\":\"in the fatal bombings at the Boston Marathon, \",\"exact\":\"a federal law enforcement source told CNN's Fran Townsend\",\"suffix\":\".\\nDetails about the suspect's identity and motive\",\"offset\":87,\"length\":57},{\"detection\":\"[on two videos taken before Monday's attack, ]the federal law enforcement source told Townsend[.\\nOne of the videos was surveillance footage]\",\"prefix\":\"on two videos taken before Monday's attack, \",\"exact\":\"the federal law enforcement source told Townsend\",\"suffix\":\".\\nOne of the videos was surveillance footage\",\"offset\":359,\"length\":48}]}}",
          headers: {
            "Accept-Ranges"       => "bytes",
            "Connection"          => "keep-alive",
            "Content-Length"      => "71879",
            "Content-Type"        => "application/json",
            "Date"                => "Fri, 13 Feb 2015 22:06:17 GMT",
            "Server"              => "Apache-Coyote/1.1",
            "X-Mashery-Responder" => "prod-p-worker-us-east-1d-72.mashery.com"
          }
        )

      stub_request(:post, "http://query.yahooapis.com/v1/public/yql").
        with(headers: {'Accept'=>'application/json;charset=utf-8', 'Content-Type'=>'application/x-www-form-urlencoded', 'Host'=>'query.yahooapis.com:80'}).
        to_return(
          status: 200,
          body: "{\"query\":{\"count\":2,\"created\":\"2015-02-13T22:20:51Z\",\"lang\":\"en-US\",\"results\":{\"yctCategories\":{\"yctCategory\":[{\"score\":\"1\",\"content\":\"Act Of Terror\"},{\"score\":\"0.980535\",\"content\":\"Society & Culture\"},{\"score\":\"0.973282\",\"content\":\"Crime & Justice\"},{\"score\":\"0.925714\",\"content\":\"Unrest, Conflicts & War\"},{\"score\":\"0.799451\",\"content\":\"Politics & Government\"}]},\"entities\":{\"entity\":[{\"score\":\"0.944\",\"text\":{\"end\":\"84\",\"endchar\":\"84\",\"start\":\"70\",\"startchar\":\"70\",\"content\":\"Boston Marathon\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Boston_Marathon\",\"types\":{\"type\":{\"region\":\"us\",\"content\":\"/event/sports\"}}},{\"score\":\"0.944\",\"text\":{\"end\":\"2514\",\"endchar\":\"2514\",\"start\":\"2509\",\"startchar\":\"2509\",\"content\":\"Boston\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Boston_Marathon\",\"types\":{\"type\":[{\"region\":\"us\",\"content\":\"/organization/sports/team\"},{\"region\":\"us\",\"content\":\"/person/music/music_artist\"},{\"region\":\"us\",\"content\":\"/place\"},{\"region\":\"us\",\"content\":\"/place/destination\"}]}},{\"score\":\"0.886\",\"text\":{\"end\":\"1032\",\"endchar\":\"1032\",\"start\":\"1018\",\"startchar\":\"1018\",\"content\":\"pressure cooker\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Pressure_cooking\"},{\"score\":\"0.886\",\"text\":{\"end\":\"3890\",\"endchar\":\"3890\",\"start\":\"3876\",\"startchar\":\"3876\",\"content\":\"pressure cooker\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Pressure_cooking\"},{\"score\":\"0.819\",\"text\":{\"end\":\"1066\",\"endchar\":\"1066\",\"start\":\"1064\",\"startchar\":\"1064\",\"content\":\"FBI\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Federal_Bureau_of_Investigation\",\"types\":{\"type\":[{\"region\":\"us\",\"content\":\"/organization\"},{\"region\":\"us\",\"content\":\"/organization/government\"}]}},{\"score\":\"0.819\",\"text\":{\"end\":\"4468\",\"endchar\":\"4468\",\"start\":\"4466\",\"startchar\":\"4466\",\"content\":\"FBI\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Federal_Bureau_of_Investigation\",\"types\":{\"type\":[{\"region\":\"us\",\"content\":\"/organization\"},{\"region\":\"us\",\"content\":\"/organization/government\"}]}},{\"score\":\"0.816\",\"text\":{\"end\":\"118\",\"endchar\":\"118\",\"start\":\"89\",\"startchar\":\"89\",\"content\":\"federal law enforcement source\"}},{\"score\":\"0.805\",\"text\":{\"end\":\"6470\",\"endchar\":\"6470\",\"start\":\"6456\",\"startchar\":\"6456\",\"content\":\"Boston Marathon\"},\"types\":{\"type\":{\"region\":\"us\",\"content\":\"/event/sports\"}}},{\"score\":\"0.781\",\"text\":{\"end\":\"3529\",\"endchar\":\"3529\",\"start\":\"3516\",\"startchar\":\"3516\",\"content\":\"Martin Richard\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Boston_Marathon_bombings\",\"types\":{\"type\":{\"region\":\"us\",\"content\":\"/person\"}}},{\"score\":\"0.768\",\"text\":{\"end\":\"143\",\"endchar\":\"143\",\"start\":\"131\",\"startchar\":\"131\",\"content\":\"Fran Townsend\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Frances_Townsend\",\"types\":{\"type\":{\"region\":\"us\",\"content\":\"/person\"}}},{\"score\":\"0.744\",\"text\":{\"end\":\"2199\",\"endchar\":\"2199\",\"start\":\"2185\",\"startchar\":\"2185\",\"content\":\"law enforcement\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Law_enforcement\"},{\"score\":\"0.666\",\"text\":{\"end\":\"2073\",\"endchar\":\"2073\",\"start\":\"2045\",\"startchar\":\"2045\",\"content\":\"Boston law enforcement source\"}},{\"score\":\"0.604\",\"text\":{\"end\":\"3897\",\"endchar\":\"3897\",\"start\":\"3892\",\"startchar\":\"3892\",\"content\":\"Boston\"},\"wiki_url\":\"http://en.wikipedia.com/wiki/Boston\",\"types\":{\"type\":[{\"region\":\"us\",\"content\":\"/organization/sports/team\"},{\"region\":\"us\",\"content\":\"/person/music/music_artist\"},{\"region\":\"us\",\"content\":\"/place\"},{\"region\":\"us\",\"content\":\"/place/destination\"}]}}]}}}}",
          headers: {
            "Access-Control-Allow-Origin" => "*",
            "Age"                         => "1",
            "Cache-Control"               => "public, max-age=3599",
            "Connection"                  => "keep-alive",
            "Content-Type"                => "application/json;charset=utf-8",
            "Date"                        => "Fri, 13 Feb 2015 22:20:51 GMT",
            "Server"                      => "ATS",
            "X-Content-Type-Options"      => "nosniff",
            "X-YQL-Host"                  => "engine8.yql.bf1.yahoo.com"
          }
        )


      result_file_path = processor.temp_directory + '/test/test_analysis.json'
      FileUtils.rm(result_file_path) rescue nil
      processor.on_message(msg)

      processor.result_details[:info][:stats].wont_be_nil
      processor.result_details[:info][:stats][:topics].must_be :>, 1

      assert File.exists?(result_file_path)
      f = File.open(result_file_path)
      result = f.read
      json = JSON.parse(result)
      json.must_be :key?, 'language'
      json.must_be :key?, 'topics'
    end
  end

end
